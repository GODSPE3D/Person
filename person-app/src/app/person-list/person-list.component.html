<!-- <app-person-detail (newNameEvent)="addName($event)"></app-person-detail>
{{newPerson.firstname}} -->

<!-- <app-person-detail [newP]="currentItem"></app-person-detail> -->

<!-- <ul>
    <li *ngFor="let p of person">
        <a routerLink="/person/{{p._id}}">
            <span class="badge">{{p._id}}</span> {{p.firstname}}
        </a>
    </li>
</ul> -->

<!-- <div class="person-menu">
    <a *ngFor="let p of person" routerLink="/person/{{p._id}}">{{p.firstname}}</a>
</div> -->
<!-- <button pButton pRipple label="New" icon="pi pi-plus" class="p-button-success mr-2" (click)="openNew()"></button> -->
<!-- <ul>
    <li *ngFor="let hero of person">
        {{hero._id}} -->
<!-- <button type="button" (click)="selectPerson(hero); showchildModal()">
            {{hero.firstname}}
        </button> -->
<!-- <button [routerLink]="['/person/{{hero._id}}']">{{hero.firstname}}</button> -->
<!-- <a routerLink="/person/{{hero._id}}">{{hero.firstname}}</a> -->
<!-- <app-person-detail *ngIf="currentItem" [newP]="currentItem"></app-person-detail> -->
<!-- </li>
</ul> -->
<!-- <app-person-detail *ngIf="currentItem" [newP]="currentItem"></app-person-detail> -->
<!-- <a *ngFor="let hero of person" routerLink="/person/{{hero._id}}">{{hero.firstname}}</a> -->
<!-- <h2>My Heroes</h2>
<ul class="heroes">
  <li *ngFor="let hero of person">
    <a routerLink="/person/{{hero._id}}">
      <span class="badge">{{hero._id}}</span> {{hero.firstname}}
    </a>
  </li>
</ul> -->

<!-- <h2>Top Heroes</h2>
<div class="heroes-menu">
  <a *ngFor="let hero of person"
    routerLink="/person/{{hero._id}}">
    {{hero.firstname}}
  </a>
</div> -->

<!-- <ul class="person">
  <li *ngFor="let p of person">
    <a routerLink="/person/{{p._id}}">
      <span class="badge">{{p._id}}</span> {{p.firstname}}
    </a>
    <button type="button" class="delete" title="delete hero"
      (click)="delete(p)">x</button>
  </li>
</ul> -->
<!-- <form [formGroup]="formGroup">
  <label for="new-person">Person name: </label>
  <input id="new-person" #personName>

  <button type="button" class="add-button" (click)="addPerson(personName.value); personName.value=''">Add Person</button>
</form> -->
<!-- <p-button label="New Person" icon="pi pi-user-plus" styleClass="p-button-info"></p-button>

<div class="card">
  <p-table [value]="person" selectionMode="single" [(selection)]="selectPerson" dataKey="code"
    [tableStyle]="{'min-width': '50rem'}">
    <ng-template pTemplate="header">
      <tr>
        <th>Firstname</th>
        <th>Lastname</th>
        <th>Address</th>
        <th>Education</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-singlePerson>
      <tr [pSelectableRow]="singlePerson" routerLink="/person/{{singlePerson._id}}">
        <td>{{singlePerson.firstname}}</td>
        <td>{{singlePerson.lastname}}</td>
        <td>{{singlePerson.address}}</td>
        <td>{{singlePerson.education}}</td>
        <p-button icon="pi pi-times" styleClass="p-button-sm p-button-rounded p-button-danger"></p-button>
      </tr>
    </ng-template>
  </p-table>
</div> -->


<!-- <mat-selection-list>
  <mat-list>
    <mat-list-item *ngFor="let p of person">{{p._id}} {{p.firstname}} {{p.lastname}}</mat-list-item>
  </mat-list>
</mat-selection-list>

<mat-selection-list #shoes>
  <mat-list-option *ngFor="let p of person">
    {{p._id}} {{p.firstname}} {{p.lastname}}
  </mat-list-option>
</mat-selection-list>

<p>
  Options selected: {{shoes.selectedOptions.selected.length}}
</p> -->


<!-- <button mat-list-item (click)="save()">Save</button> -->
<!-- <article>
  <table mat-table [dataSource]="dataSource">
    <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
      <th mat-header-cell *matHeaderCellDef>
        {{col.label}}
      </th>
      <td mat-cell *matCellDef="let element">
        {{element[col]}}
        <mat-form-field>
          <input [type]="col.type" matInput [(ngModel)]="element[col.key]">
        </mat-form-field>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</article> -->

<!-- <article>
  <table mat-table [dataSource]="dataSource">
    <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
      <th mat-header-cell *matHeaderCellDef>
        {{col.label}}
      </th>
      <td mat-cell *matCellDef="let element">
        {{element[col.key]}}
        <button mat-button (click)="editPerson(element)">Done</button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</article> -->

<!-- <article class="table-header"> -->
<!-- <button class="button-remove-rows" mat-button (click)="removeSelectedRows()">
    Remove Rows
  </button> -->
<!-- <button class="button-add-row" mat-button (click)="addPerson()">Add Row</button>
</article>
<table mat-table [dataSource]="dataSource">
  <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
    <th mat-header-cell *matHeaderCellDef [ngSwitch]="col.key">
      <span *ngSwitchCase="'isSelected'"> -->
<!-- <mat-checkbox (change)="onPersonToggled($event)" [checked]="onPersonToggled()"
          [indeterminate]="!isAllSelected() && isAnySelected()">
        </mat-checkbox> -->
<!-- </span>
      <span *ngSwitchDefault>{{ col.label }}</span>
    </th>
    <td mat-cell *matCellDef="let element">
      <div [ngSwitch]="col.type" *ngIf="!element.isEdit">
        <ng-container *ngSwitchCase="'isSelected'">
          <mat-checkbox (change)="element.isSelected = $event.checked" [checked]="element.isSelected">
          </mat-checkbox>
        </ng-container>
        <div class="btn-edit" *ngSwitchCase="'isEdit'">
          <button mat-button (click)="editPerson(element)">
            Edit
          </button>
          <button mat-button class="button-remove" (click)="deletePerson(element.id)">
            Delete
          </button>
        </div>
        <span *ngSwitchDefault>
          {{ element[col.key] }}
        </span>
      </div>
      <div [ngSwitch]="col.type" *ngIf="element.isEdit">
        <div *ngSwitchCase="'isSelected'"></div>
        <div class="btn-edit" *ngSwitchCase="'isEdit'">
          <button mat-button (click)="element.isEdit = !element.isEdit">
            Done
          </button>
        </div>
        <mat-form-field class="form-input" *ngSwitchDefault>
          <input [required]="col.required" [type]="col.type" matInput [(ngModel)]="element[col.key]" />
        </mat-form-field>
      </div>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table> -->

<app-person-detail #child></app-person-detail>

<mat-card>
  <mat-card-header>
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="child.openDialog()"><mat-icon aria-hidden="false"
          aria-label="Add person" fontIcon="person_add"></mat-icon>Add Person</button>
      <!-- <button mat-raised-button color="accent" [disabled]="!selectedCheck.checked"><mat-icon aria-hidden="false" aria-label="Example home icon" fontIcon="delete"></mat-icon>Delete</button> -->
    </mat-card-actions>
  </mat-card-header>
  <mat-card-content>
    <table mat-table [dataSource]="dataSource">
      <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
        <th mat-header-cell *matHeaderCellDef [ngSwitch]="col.key">
          <!-- <span *ngSwitchCase="'isSelected'">
        <mat-checkbox (change)="selectAll($event)" [checked]="isAllSelected()"
          [indeterminate]="!isAllSelected() && isAnySelected()"></mat-checkbox>
      </span> -->
          <span *ngSwitchDefault>{{ col.label }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div [ngSwitch]="col.type" *ngIf="!element.isEdit">
            <ng-container *ngSwitchCase="'isSelected'">
              <mat-checkbox (change)="element.isSelected = $event.checked" [checked]="element.isSelected"
                #selectedCheck></mat-checkbox>
              <button class="parent" mat-raised-button color="secondary" (click)="child.openDialog2()"
                [disabled]="!selectedCheck.checked"><mat-icon aria-hidden="false"
                aria-label="Edit person" fontIcon="edit"></mat-icon>Edit</button>
              <button class="parent" mat-raised-button color="warn" [disabled]="!selectedCheck.checked"><mat-icon
                  aria-hidden="false" aria-label="delete" fontIcon="delete"></mat-icon>Delete</button>
            </ng-container>
            <!-- <div class="btn-edit" *ngSwitchCase="'isEdit'">
              <button mat-button (click)="element.isEdit = !element.isEdit"><mat-icon aria-hidden="false"
                  aria-label="Edit person" fontIcon="edit"></mat-icon>
                Edit
              </button>
              <button mat-button class="button-remove" (click)="deletePerson(element.id)">
                Delete
              </button>
            </div> -->
            <span *ngSwitchDefault>
              {{ element[col.key] }}
            </span>
          </div>
          <div [ngSwitch]="col.type" *ngIf="element.isEdit">
            <div *ngSwitchCase="'isSelected'"></div>
            <div class="btn-edit" *ngSwitchCase="'isEdit'">
              <button mat-button (click)="editPerson(element)" [disabled]="disableSubmit(element.id)">
                Done
              </button>
            </div>
            <mat-form-field class="form-input" *ngSwitchDefault>
              <input matInput [required]="col.required" [pattern]="col.pattern" [type]="col.type"
                [(ngModel)]="element[col.key]" (change)="inputHandler($event, element.id, col.key)" />
            </mat-form-field>
          </div>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-card-content>
</mat-card>

<!-- <mat-checkbox #confirmed>Yes, I confirm</mat-checkbox>
<button mat-button [disabled]="!confirmed.checked">Delete</button> -->

<!-- <ol>
  <li>
    <mat-form-field appearance="fill">
      <mat-label>What's your name?</mat-label>
      <input matInput [(ngModel)]="name">
    </mat-form-field>
  </li>
  <li>
    <button mat-raised-button (click)="child.openDialog()">Pick one</button>
  </li>
  <li *ngIf="animal">
    You chose: <i>{{animal}}</i>
  </li>
</ol> -->


<!-- <app-person-detail></app-person-detail> -->
<!-- <app-person-detail *ngFor="let hero of person" [newP]="hero"></app-person-detail> -->
<!-- <app-person-detail #child></app-person-detail> -->